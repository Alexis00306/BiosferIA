<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Identificador de Especies</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
      }

      .container {
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }

      h1 {
        text-align: center;
        color: #333;
        margin-bottom: 30px;
      }

      .upload-area {
        border: 3px dashed #667eea;
        border-radius: 10px;
        padding: 40px;
        text-align: center;
        margin-bottom: 20px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .upload-area:hover {
        background-color: #f8f9ff;
        border-color: #764ba2;
      }

      .upload-area.dragover {
        background-color: #f0f4ff;
        border-color: #667eea;
      }

      #fileInput {
        display: none;
      }

      .preview-container {
        text-align: center;
        margin: 20px 0;
      }

      #imagePreview {
        max-width: 100%;
        max-height: 300px;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      button {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        padding: 12px 30px;
        border-radius: 25px;
        cursor: pointer;
        font-size: 16px;
        transition: transform 0.2s ease;
        display: block;
        margin: 20px auto;
      }

      button:hover {
        transform: translateY(-2px);
      }

      button:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
      }

      .loading {
        text-align: center;
        padding: 20px;
        color: #667eea;
      }

      .results {
        margin-top: 30px;
      }

      .species-card {
        background: #f8f9ff;
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 15px;
        border-left: 4px solid #667eea;
        transition: transform 0.2s ease;
      }

      .species-card:hover {
        transform: translateX(5px);
      }

      .species-name {
        font-size: 18px;
        font-weight: bold;
        color: #333;
        margin-bottom: 5px;
      }

      .scientific-name {
        font-style: italic;
        color: #666;
        margin-bottom: 10px;
      }

      .confidence {
        background: #667eea;
        color: white;
        padding: 4px 8px;
        border-radius: 15px;
        font-size: 12px;
        display: inline-block;
        margin-bottom: 10px;
      }

      .description {
        color: #555;
        line-height: 1.5;
      }

      .taxonomy-type {
        background: #e8f5e8;
        color: #2d5a2d;
        padding: 4px 12px;
        border-radius: 15px;
        font-size: 12px;
        display: inline-block;
        margin-bottom: 10px;
        margin-left: 10px;
        font-weight: bold;
      }

      .taxonomy-type.fauna {
        background: #fff3e0;
        color: #e65100;
      }

      .taxonomy-type.flora {
        background: #e8f5e8;
        color: #2e7d32;
      }

      .taxonomy-type.fungi {
        background: #f3e5f5;
        color: #7b1fa2;
      }

      .error {
        background: #ffe6e6;
        color: #d63031;
        padding: 15px;
        border-radius: 10px;
        border-left: 4px solid #d63031;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üåø Identificador de Especies ü¶ã</h1>

      <div
        class="upload-area"
        onclick="document.getElementById('fileInput').click()"
      >
        <p>
          üì∏ Haz clic aqu√≠ o arrastra una imagen para identificar flora y fauna
        </p>
        <p style="font-size: 14px; color: #666">
          Formatos: JPG, PNG, WebP<br />
          <em>Solo identifica organismos vivos: plantas, animales u hongos</em>
        </p>
      </div>

      <input type="file" id="fileInput" accept="image/*" />

      <div
        class="preview-container"
        id="previewContainer"
        style="display: none"
      >
        <img id="imagePreview" alt="Vista previa" />
        <button id="identifyBtn" onclick="identifySpecies()">
          üîç Identificar Especie
        </button>
      </div>

      <div id="loading" class="loading" style="display: none">
        <p>üîÑ Analizando imagen...</p>
      </div>

      <div id="results" class="results"></div>
    </div>

    <script>
      const fileInput = document.getElementById("fileInput");
      const uploadArea = document.querySelector(".upload-area");
      const previewContainer = document.getElementById("previewContainer");
      const imagePreview = document.getElementById("imagePreview");
      const identifyBtn = document.getElementById("identifyBtn");
      const loading = document.getElementById("loading");
      const results = document.getElementById("results");

      // Drag and drop functionality
      uploadArea.addEventListener("dragover", (e) => {
        e.preventDefault();
        uploadArea.classList.add("dragover");
      });

      uploadArea.addEventListener("dragleave", () => {
        uploadArea.classList.remove("dragover");
      });

      uploadArea.addEventListener("drop", (e) => {
        e.preventDefault();
        uploadArea.classList.remove("dragover");
        const files = e.dataTransfer.files;
        if (files.length > 0) {
          handleFile(files[0]);
        }
      });

      fileInput.addEventListener("change", (e) => {
        if (e.target.files.length > 0) {
          handleFile(e.target.files[0]);
        }
      });

      function handleFile(file) {
        if (!file.type.startsWith("image/")) {
          alert("Por favor selecciona una imagen v√°lida");
          return;
        }

        const reader = new FileReader();
        reader.onload = (e) => {
          imagePreview.src = e.target.result;
          previewContainer.style.display = "block";
          results.innerHTML = "";
        };
        reader.readAsDataURL(file);
      }

      async function identifySpecies() {
        const file = fileInput.files[0];
        if (!file) {
          alert("Por favor selecciona una imagen primero");
          return;
        }

        loading.style.display = "block";
        results.innerHTML = "";
        identifyBtn.disabled = true;

        try {
          // Redimensionar imagen si es muy grande
          const resizedFile = await resizeImage(file, 800, 600);

          // Tu API key configurada
          const apiKey =
            "eyJhbGciOiJIUzUxMiJ9.eyJ1c2VyX2lkIjo5NjA4MDgwLCJleHAiOjE3NTQzMzk2MTJ9.YXtwHUpZoRiLP1CAouoiNygRTBlUpVqzV8ipnD0kHeRWsD1-Psa341Iip7dGbfNPA_CYzNJSPo6Y85j7Et5RTg";

          // M√©todo 1: Usar Computer Vision con tu API key
          if (apiKey) {
            try {
              const visionData = await identifyWithComputerVision(
                resizedFile,
                apiKey
              );
              if (
                visionData &&
                visionData.results &&
                visionData.results.length > 0
              ) {
                await processVisionResults(visionData.results);
                return;
              }
            } catch (error) {
              console.warn("Computer Vision fall√≥:", error);

              // Si el token expir√≥, mostrar mensaje espec√≠fico
              if (
                error.message.includes("401") ||
                error.message.includes("Unauthorized")
              ) {
                results.innerHTML = `
                                <div class="error">
                                    <strong>‚è∞ Token expirado</strong><br>
                                    Tu API token ha expirado (duran 24 horas).<br><br>
                                    <strong>Soluci√≥n:</strong><br>
                                    1. Ve a <a href="https://www.inaturalist.org/users/api_token" target="_blank">inaturalist.org/users/api_token</a><br>
                                    2. Copia el nuevo token<br>
                                    3. Actualiza el c√≥digo con el nuevo token<br><br>
                                    <em>Mientras tanto, puedes usar la b√∫squeda manual...</em>
                                </div>
                            `;
                await identifyWithSearch(resizedFile);
                return;
              }

              // Otros errores, continuar con b√∫squeda manual
              await identifyWithSearch(resizedFile);
              return;
            }
          }

          // M√©todo 2: Buscar por similitudes usando la API de b√∫squeda (sin autenticaci√≥n)
          await identifyWithSearch(resizedFile);
        } catch (error) {
          console.error("Error completo:", error);

          let errorMessage = "Error desconocido";

          if (error.message.includes("401")) {
            errorMessage =
              "API Key requerida para Computer Vision. Usa el m√©todo de b√∫squeda alternativo o proporciona una API Key v√°lida.";
          } else if (
            error.name === "TypeError" &&
            error.message.includes("fetch")
          ) {
            errorMessage = "Problema de conexi√≥n. Verifica tu internet.";
          } else {
            errorMessage = error.message;
          }

          results.innerHTML = `
                    <div class="error">
                        <strong>Error:</strong> ${errorMessage}
                        <br><br>
                        <strong>Soluciones:</strong>
                        <ul style="margin-top: 10px; text-align: left;">
                            <li>Obt√©n una API Key gratuita en <a href="https://www.inaturalist.org/users/api_token" target="_blank">iNaturalist</a></li>
                            <li>O usa el m√©todo de b√∫squeda sin autenticaci√≥n</li>
                            <li>Verifica tu conexi√≥n a internet</li>
                        </ul>
                    </div>
                `;
        } finally {
          loading.style.display = "none";
          identifyBtn.disabled = false;
        }
      }

      // M√©todo con Computer Vision (requiere API key)
      async function identifyWithComputerVision(file, apiKey) {
        const formData = new FormData();
        formData.append("image", file);

        const response = await fetch(
          "https://api.inaturalist.org/v1/computervision/score_image",
          {
            method: "POST",
            body: formData,
            headers: {
              Authorization: `Bearer ${apiKey}`,
              Accept: "application/json",
            },
          }
        );

        if (!response.ok) {
          throw new Error(
            `Error HTTP ${response.status}: ${response.statusText}`
          );
        }

        return await response.json();
      }

      // M√©todo alternativo: b√∫squeda manual por caracter√≠sticas
      async function identifyWithSearch(file) {
        // Mostrar opciones de b√∫squeda manual
        results.innerHTML = `
                <div style="background: #e3f2fd; padding: 20px; border-radius: 10px; border-left: 4px solid #2196f3;">
                    <h3>üîç Identificaci√≥n Manual</h3>
                    <p>Sin API Key, puedes buscar especies manualmente. ¬øQu√© tipo de organismo es?</p>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; margin-top: 15px;">
                        <button onclick="searchByType('Plantae')" style="background: #4caf50; margin: 5px;">üå± Planta</button>
                        <button onclick="searchByType('Animalia')" style="background: #ff9800; margin: 5px;">üêõ Animal</button>
                        <button onclick="searchByType('Fungi')" style="background: #9c27b0; margin: 5px;">üçÑ Hongo</button>
                        <button onclick="searchByType('Aves')" style="background: #03a9f4; margin: 5px;">üê¶ Ave</button>
                    </div>
                    
                    <div style="margin-top: 15px;">
                        <input type="text" id="manualSearch" placeholder="O escribe el nombre de la especie..." 
                               style="width: 70%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                        <button onclick="searchByName()" style="width: 25%; margin-left: 5px;">Buscar</button>
                    </div>
                </div>
            `;
      }

      // Buscar por tipo de organismo
      async function searchByType(iconicTaxon) {
        try {
          const response = await fetch(
            `https://api.inaturalist.org/v1/taxa?iconic_taxa=${iconicTaxon}&per_page=5&order=desc&order_by=observations_count`
          );
          const data = await response.json();

          if (data.results && data.results.length > 0) {
            displaySearchResults(
              data.results,
              `Especies comunes - ${getIconicTaxonName(iconicTaxon)}`
            );
          }
        } catch (error) {
          console.error("Error en b√∫squeda por tipo:", error);
        }
      }

      // Buscar por nombre
      async function searchByName() {
        const searchTerm = document.getElementById("manualSearch").value.trim();
        if (!searchTerm) return;

        try {
          const response = await fetch(
            `https://api.inaturalist.org/v1/taxa?q=${encodeURIComponent(
              searchTerm
            )}&per_page=3`
          );
          const data = await response.json();

          if (data.results && data.results.length > 0) {
            displaySearchResults(
              data.results,
              `Resultados para "${searchTerm}"`
            );
          } else {
            results.innerHTML +=
              '<div class="error">No se encontraron especies con ese nombre.</div>';
          }
        } catch (error) {
          console.error("Error en b√∫squeda por nombre:", error);
        }
      }

      // Traducir nombres de grupos taxon√≥micos
      function getIconicTaxonName(iconicTaxon) {
        const translations = {
          Plantae: "Plantas",
          Animalia: "Animales",
          Fungi: "Hongos",
          Aves: "Aves",
        };
        return translations[iconicTaxon] || iconicTaxon;
      }

      // Mostrar resultados de b√∫squeda
      function displaySearchResults(species, title) {
        // Filtrar solo especies v√°lidas (flora, fauna, fungi)
        const validSpecies = species.filter((specie) => {
          const iconic = specie.iconic_taxon_name;
          return (
            iconic === "Plantae" ||
            iconic === "Animalia" ||
            iconic === "Aves" ||
            iconic === "Insecta" ||
            iconic === "Mammalia" ||
            iconic === "Reptilia" ||
            iconic === "Amphibia" ||
            iconic === "Fungi" ||
            iconic === "Actinopterygii" ||
            iconic === "Arachnida" ||
            iconic === "Mollusca"
          );
        });

        if (validSpecies.length === 0) {
          results.innerHTML += `
            <div class="error">
              <strong>‚ö†Ô∏è No se encontraron especies v√°lidas</strong><br>
              Los resultados no contienen flora, fauna u hongos reconocibles.
            </div>
          `;
          return;
        }

        const resultsHTML = validSpecies
          .map((specie) => {
            const spanishName = getSpanishName(specie);
            const scientificName =
              specie.name || "Nombre cient√≠fico no disponible";
            const description = getOriginalDescription(specie);
            const taxonomyType = getTaxonomyType(specie);

            return `
                    <div class="species-card">
                        <div class="species-name">${spanishName}</div>
                        <div class="scientific-name">${scientificName}</div>
                        ${taxonomyType}
                        <div class="description">${description}</div>
                        ${
                          specie.default_photo
                            ? `<img src="${specie.default_photo.square_url}" style="width: 80px; height: 80px; border-radius: 8px; margin-top: 10px;" alt="${spanishName}">`
                            : ""
                        }
                    </div>
                `;
          })
          .join("");

        results.innerHTML = `
                <h3>üéØ ${title}:</h3>
                ${resultsHTML}
            `;
      }

      // Procesar resultados de Computer Vision
      async function processVisionResults(visionResults) {
        try {
          // Filtrar solo resultados que sean flora, fauna o fungi
          const validResults = visionResults.filter((result) => {
            const iconic = result.taxon.iconic_taxon_name;
            return (
              iconic === "Plantae" ||
              iconic === "Animalia" ||
              iconic === "Aves" ||
              iconic === "Insecta" ||
              iconic === "Mammalia" ||
              iconic === "Reptilia" ||
              iconic === "Amphibia" ||
              iconic === "Fungi" ||
              iconic === "Actinopterygii" ||
              iconic === "Arachnida" ||
              iconic === "Mollusca"
            );
          });

          if (validResults.length === 0) {
            results.innerHTML = `
              <div class="error">
                <strong>‚ö†Ô∏è No es flora ni fauna</strong><br>
                La imagen no parece contener organismos vivos (plantas, animales u hongos).<br><br>
                <strong>Sugerencias:</strong>
                <ul style="margin-top: 10px; text-align: left;">
                  <li>üì∏ Toma una foto de una planta, animal o hongo</li>
                  <li>üîç Aseg√∫rate de que el organismo sea el elemento principal de la imagen</li>
                  <li>üí° Evita objetos inanimados, personas o paisajes sin especies claras</li>
                </ul>
              </div>
            `;
            return;
          }

          // Solo tomar el resultado con mayor confianza de los v√°lidos
          const bestResult = validResults[0];

          const taxaResponse = await fetch(
            `https://api.inaturalist.org/v1/taxa/${bestResult.taxon.id}?locale=es`
          );
          if (!taxaResponse.ok) {
            throw new Error("No se pudo obtener informaci√≥n de la especie");
          }

          const taxaData = await taxaResponse.json();
          const species = taxaData.results[0];

          const finalSpecies = {
            ...species,
            confidence: bestResult.combined_score,
          };

          // Mostrar solo el mejor resultado
          displaySingleResult(finalSpecies);
        } catch (error) {
          console.error("Error obteniendo detalles de especie:", error);
          results.innerHTML =
            '<div class="error">No se pudo procesar la identificaci√≥n de la especie.</div>';
        }
      }

      // NUEVA FUNCI√ìN: Determinar si es fauna, flora o fungi
      function getTaxonomyType(specie) {
        const iconic = specie.iconic_taxon_name;

        // Determinar el tipo basado en el grupo taxon√≥mico
        if (iconic === "Plantae") {
          return '<div class="taxonomy-type flora">üå± FLORA</div>';
        } else if (iconic === "Fungi") {
          return '<div class="taxonomy-type fungi">üçÑ FUNGI</div>';
        } else if (
          iconic === "Animalia" ||
          iconic === "Aves" ||
          iconic === "Insecta" ||
          iconic === "Mammalia" ||
          iconic === "Reptilia" ||
          iconic === "Amphibia" ||
          iconic === "Actinopterygii" ||
          iconic === "Arachnida" ||
          iconic === "Mollusca"
        ) {
          return '<div class="taxonomy-type fauna">üêæ FAUNA</div>';
        } else {
          // Para casos no clasificados, intentar determinar por ancestros
          const ancestors = specie.ancestors || [];
          for (let ancestor of ancestors) {
            if (ancestor.name === "Plantae")
              return '<div class="taxonomy-type flora">üå± FLORA</div>';
            if (ancestor.name === "Fungi")
              return '<div class="taxonomy-type fungi">üçÑ FUNGI</div>';
            if (ancestor.name === "Animalia")
              return '<div class="taxonomy-type fauna">üêæ FAUNA</div>';
          }

          // Si no se puede determinar, no mostrar nada
          return "";
        }
      }

      // NUEVA FUNCI√ìN: Obtener descripci√≥n original hasta el primer punto
      function getOriginalDescription(specie) {
        // Primero intentar obtener la descripci√≥n de Wikipedia
        if (specie.wikipedia_summary && specie.wikipedia_summary.length > 0) {
          // Buscar el primer punto seguido de espacio o final de cadena
          const firstSentence = specie.wikipedia_summary.match(/^[^.]*\./);
          if (firstSentence) {
            return firstSentence[0].trim();
          }
          // Si no encuentra punto, tomar hasta los primeros 200 caracteres
          return specie.wikipedia_summary.substring(0, 200) + "...";
        }

        // Si no hay descripci√≥n de Wikipedia, usar la descripci√≥n b√°sica
        return getBasicSpanishDescription(specie);
      }

      // Funci√≥n para traducir y resumir descripci√≥n (MODIFICADA)
      async function translateAndSummarize(englishText, scientificName) {
        // Ahora solo extraer hasta el primer punto
        const firstSentence = englishText.match(/^[^.]*\./);
        if (firstSentence) {
          return firstSentence[0].trim();
        }

        // Si no encuentra punto, tomar hasta los primeros 200 caracteres
        if (englishText.length > 200) {
          return englishText.substring(0, 200) + "...";
        }

        return englishText;
      }

      // Traducci√≥n b√°sica para t√©rminos cient√≠ficos comunes
      async function basicTranslate(text, scientificName) {
        // Esta funci√≥n ya no se usa, pero la mantengo por compatibilidad
        return text;
      }

      // Funci√≥n para redimensionar im√°genes grandes
      function resizeImage(file, maxWidth, maxHeight) {
        return new Promise((resolve) => {
          const canvas = document.createElement("canvas");
          const ctx = canvas.getContext("2d");
          const img = new Image();

          img.onload = () => {
            // Calcular nuevas dimensiones
            let { width, height } = img;

            if (width > maxWidth || height > maxHeight) {
              const ratio = Math.min(maxWidth / width, maxHeight / height);
              width *= ratio;
              height *= ratio;
            }

            canvas.width = width;
            canvas.height = height;

            // Dibujar imagen redimensionada
            ctx.drawImage(img, 0, 0, width, height);

            // Convertir a blob
            canvas.toBlob(
              (blob) => {
                resolve(new File([blob], file.name, { type: file.type }));
              },
              file.type,
              0.8
            );
          };

          img.src = URL.createObjectURL(file);
        });
      }

      // Mostrar un solo resultado (el de mayor confianza) - MODIFICADO
      function displaySingleResult(specie) {
        const spanishName = getSpanishName(specie);
        const scientificName = specie.name || "Nombre cient√≠fico no disponible";
        const description = getOriginalDescription(specie);
        const confidence = Math.round(specie.confidence * 100);
        const taxonomyType = getTaxonomyType(specie);

        results.innerHTML = `
                <div class="species-card">
                    <div class="species-name">${spanishName}</div>
                    <div class="scientific-name">${scientificName}</div>
                    <div class="confidence">Confianza: ${confidence}%</div>
                    ${taxonomyType}
                    <div class="description">${description}</div>
                </div>
            `;
      }

      // Obtener nombre com√∫n en espa√±ol
      function getSpanishName(specie) {
        // Buscar nombres en espa√±ol en las traducciones
        if (specie.names && specie.names.length > 0) {
          // Buscar espec√≠ficamente nombres en espa√±ol
          const spanishNames = specie.names.filter(
            (name) =>
              name.locale === "es" ||
              name.locale === "es-MX" ||
              name.locale === "es-ES"
          );

          if (spanishNames.length > 0) {
            return spanishNames[0].name;
          }

          // Si no hay espa√±ol, buscar nombres comunes en general
          const commonNames = specie.names.filter(
            (name) => name.locale === "en"
          );
          if (commonNames.length > 0) {
            return translateCommonName(commonNames[0].name);
          }
        }

        // Fallback al preferred_common_name
        if (specie.preferred_common_name) {
          return translateCommonName(specie.preferred_common_name);
        }

        // √öltimo recurso: crear nombre descriptivo
        return createDescriptiveName(specie);
      }

      // Traducir nombres comunes b√°sicos
      function translateCommonName(englishName) {
        const nameTranslations = {
          // Plantas
          Oak: "Roble",
          Pine: "Pino",
          Rose: "Rosa",
          Sunflower: "Girasol",
          Daisy: "Margarita",
          Lily: "Lirio",
          Tulip: "Tulip√°n",
          Cactus: "Cactus",
          Aloe: "Aloe",
          Fern: "Helecho",
          Moss: "Musgo",
          Grass: "Hierba",
          Tree: "√Årbol",
          Shrub: "Arbusto",
          Herb: "Hierba",

          // Animales
          Dog: "Perro",
          Cat: "Gato",
          Bird: "Ave",
          Butterfly: "Mariposa",
          Bee: "Abeja",
          Ant: "Hormiga",
          Spider: "Ara√±a",
          Beetle: "Escarabajo",
          Fly: "Mosca",
          Moth: "Polilla",
          Dragonfly: "Lib√©lula",
          Ladybug: "Mariquita",
          Grasshopper: "Saltamontes",
          Cricket: "Grillo",
          Frog: "Rana",
          Lizard: "Lagarto",
          Snake: "Serpiente",
          Fish: "Pez",
          Mouse: "Rat√≥n",
          Rabbit: "Conejo",
        };

        // Buscar traducci√≥n exacta
        for (const [english, spanish] of Object.entries(nameTranslations)) {
          if (englishName.toLowerCase().includes(english.toLowerCase())) {
            return (spanishName = englishName.replace(
              new RegExp(english, "gi"),
              spanish
            ));
          }
        }

        // Si no encuentra traducci√≥n, devolver el original
        return englishName;
      }

      // Crear nombre descriptivo basado en taxonom√≠a
      function createDescriptiveName(specie) {
        const iconic = specie.iconic_taxon_name;

        switch (iconic) {
          case "Plantae":
            return "Planta no identificada";
          case "Animalia":
            return "Animal no identificado";
          case "Aves":
            return "Ave no identificada";
          case "Insecta":
            return "Insecto no identificado";
          case "Fungi":
            return "Hongo no identificado";
          case "Mammalia":
            return "Mam√≠fero no identificado";
          case "Reptilia":
            return "Reptil no identificado";
          case "Amphibia":
            return "Anfibio no identificado";
          default:
            return "Especie no identificada";
        }
      }

      // Descripci√≥n b√°sica en espa√±ol
      function getBasicSpanishDescription(specie) {
        const iconic = specie.iconic_taxon_name;
        const scientificName = specie.name;

        const descriptions = {
          Plantae: `${scientificName} es una especie de planta. Las plantas son organismos fotosint√©ticos fundamentales para los ecosistemas terrestres.`,
          Aves: `${scientificName} es una especie de ave. Las aves son vertebrados con plumas que desempe√±an roles importantes en la dispersi√≥n de semillas y control de insectos.`,
          Insecta: `${scientificName} es una especie de insecto. Los insectos son el grupo m√°s diverso de animales y son cruciales para la polinizaci√≥n y descomposici√≥n.`,
          Mammalia: `${scientificName} es una especie de mam√≠fero. Los mam√≠feros son vertebrados de sangre caliente que amamantan a sus cr√≠as.`,
          Fungi: `${scientificName} es una especie de hongo. Los hongos descomponen materia org√°nica y forman asociaciones simbi√≥ticas con plantas.`,
          Reptilia: `${scientificName} es una especie de reptil. Los reptiles son vertebrados de sangre fr√≠a con piel escamosa.`,
          Amphibia: `${scientificName} es una especie de anfibio. Los anfibios tienen una piel permeable y generalmente requieren agua para reproducirse.`,
        };

        return (
          descriptions[iconic] ||
          `${scientificName} es una especie registrada en la base de datos cient√≠fica de biodiversidad.`
        );
      }
    </script>
  </body>
</html>
